# Database-controller
Приложение для создания и генерации таблиц в бд в соответствии с требованиями проекта.
Рассмотрим функционал данного мини-приложения:
1.	При запуске приложения пользователя встречает окошко с тремя полями для ввода имени базы данных, имени пользователя, порта и пароля

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/ec3799f1-9330-4d1f-a7c9-b7b9f20a5187)


При вводе ошибке подключения всплывает соответствующее сообщение:

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/a44456fe-ffd8-4a0f-9e19-9fe070976774)


2.	Если подключение к БД установлено, то окно обновляется, появляется виджет с двумя колонками. 
 
![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/4578a25a-580c-4140-ba7e-b068e7076d44)


В левой колонке пользователь может выбрать название таблицы, для которой необходимо сгенерировать данные, а также необходимое количество записей. По нажатию кнопки «Generate!» сгенерированные данные будут записаны в бд в выбранное отношение.
Процесс генерации происходит следующим образом: Есть три основных типа таблиц. Первый тип – таблицы, в которых необходимо «создавать» людей, а значит генерировать имена, фамилии, паспортные данные и т.д. Происходит это так: есть файл names.xlsx, в котором хранится пул ФИО людей, а также их пол. 

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/1b339d48-e3ee-45d1-a5ec-32a9532ced16)


Сначала в программе определяется пол человека, фильтруются строки таблицы, а затем случайным образом из соответствующих столбцов берется фамилия, имя и отчество человека. После этого генерируется дата рождения и паспортные данные человека, для следователей создается звание и номер части, для потерпевших – номер телефона и статус (потерпевший/свидетель).

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/be38a18a-3c5f-4c1f-bcc6-9977fd342309)

Свидетели

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/978164b1-6f0d-4fd1-9f26-5959c1c77385)

Преступники

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/7ca81299-9c3a-42c6-a5f5-6fc9a9740bc8)

Потерпевшие

Второй тип таблицы – преступления. Тут используется файл classification.xlsx. Сначала идет проверка на существование и полноту таблицы следователи. Если эти условия не соблюдены, то программа выдаст одно из предупреждений предупреждение

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/fd33b57c-6d2f-4077-9970-bb15641750e0) ![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/d2f2e971-6afc-4fd5-a009-e9c1e3bfcc7e)


Если же все условия соблюдены, то начнется процесс генерации: случайно выбирается тип преступления, генерируется дата совершенного преступления, выбирается статус рассмотрения преступления. Если началось расследование (status = True), то делу приписывается существующий id следователя, а также результат расследования (result = True, False, None)

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/c2d0a914-5140-4779-ba6b-64f11647499b)


Третий тип таблиц – смежные таблицы. Как и со вторым типом, сначала идет проверка на существование и полноту таблиц, для которых создается смежная.

    
![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/fbc748f4-8f94-48a4-9ef7-ff65f36ce5a9)
![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/37e0f101-fdee-4e19-af5a-b2e15e8ba29f)



Если все условия соблюдены, то из уже существующих таблиц случайным образом берутся id. Иначе создание можно представить как взятие случайных n строк из декартового произведения столбцов id из двух таблиц.

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/774d4f54-7bf6-4bea-9952-ad41e0226bbe)

Таблица Преступники-Преступления

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/c6e733dc-0f4d-4ecc-af2f-912c72e4873a)

Таблица Потерпевшие-Преступления

В правой колонке находится поле с выбором отношения, о котором необходимо узнать информацию. По нажатию кнопки «Count!» в окошке появляется число записей в выбранном отношении:

![image](https://github.com/Erokhind1827/Database-controller/assets/103384979/8ae73b5a-9a98-4e8e-8f71-b22d33077a1f)


При закрытии приложения в final_query.txt сохраняется вся история запросов, отправленных на субд
